
<div class="basket-container" dir="ltr">
    <p-table [value]="basketItems" styleClass="p-datatable-sm">
        <ng-template pTemplate="body" let-item>
            <tr class="border-bottom-1 border-100">
                
                <td class="text-center" style="width: 30%">
                    @if (item.giftImage) {
                        <img [src]="'assets/images/' + item.giftImage" 
                             [alt]="item.giftName" 
                             class="w-4rem h-4rem border-round shadow-1 mb-1 mt-2" />
                    } @else {
                        <div class="w-4rem h-4rem bg-gray-100 border-round flex align-items-center justify-content-center mx-auto mb-1 mt-2">
                            <i class="pi pi-image text-400 text-2xl"></i>
                        </div>
                    }
                    <div class="text-900 font-bold text-xs uppercase">
                        {{ item.giftName || 'Gift #' + item.giftId }}
                    </div>
                </td>

                <td class="text-center" style="width: 50%">
                    <div class="flex align-items-center justify-content-center gap-2">
                        <button pButton icon="pi pi-minus" 
                                class="p-button-rounded p-button-text p-button-sm bg-gray-100 text-700"
                                (click)="updateQuantity(item, -1)"
                                [disabled]="item.quantity <= 1"></button>
                        
                        <span class="font-bold text-lg w-2rem text-center">{{item.quantity}}</span>
                        
                        <button pButton icon="pi pi-plus" 
                                class="p-button-rounded p-button-text p-button-sm bg-gray-100 text-700"
                                (click)="updateQuantity(item, 1)"></button>
                    </div>
                    
                    @if (item.price) {
                        <div class="text-primary font-semibold mt-2">${{ item.price * item.quantity }}</div>
                    }
                </td>

                <td class="text-center" style="width: 20%">
                    <button pButton icon="pi pi-trash" 
                            class="p-button-rounded p-button-danger p-button-text"
                            (click)="removeFromBasket(item.id)"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>

    @if (basketItems.length === 0) {
        <div class="flex flex-column align-items-center justify-content-center p-6 text-400">
            <i class="pi pi-shopping-bag text-6xl mb-3 opacity-50"></i>
            <span class="text-xl font-medium">Your basket is empty</span>
            <p class="text-sm mt-2">Looks like you haven't added anything yet.</p>
        </div>
    }

    @if (basketItems.length > 0) {
        <div class="mt-5 p-4 surface-card border-round-xl shadow-2 border-1 border-100">
            <div class="flex justify-content-between align-items-center mb-4">
                <span class="text-700 font-bold text-lg">Total Items:</span>
                <span class="text-900 font-bold text-2xl text-primary">
                    {{ basketItems.length }}
                </span>
            </div>

            @if (calculateTotal() > 0) {
                <div class="flex justify-content-between align-items-center mb-4">
                    <span class="text-700 font-bold text-lg">Total Price:</span>
                    <span class="text-900 font-bold text-2xl text-primary">${{ calculateTotal() }}</span>
                </div>
            }

            <button pButton label="Checkout Now" 
                    class="w-full p-button-rounded p-button-primary shadow-2 font-bold py-3 uppercase">
            </button>
        </div>
    }
</div>